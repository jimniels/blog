---
(site) => {
  page: {
    title: "RSS",
    path: "/feed.html",
    head: `
      <style>
        .h-feed time {
          font-size: 80%;
          opacity: 0.666;
        }
        .h-feed h2 {
          margin-top: 3rem;
        }
        .h-feed h3 {
          margin: 0;
          padding-right: 6rem;
        }
        .h-entry {
          border-top: 1px solid var(--c-fg);
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          padding: 2rem 0;
          position: relative;
        }
        .h-entry summary {
          background: var(--c-fg);
          padding: 4px 0;
          width: 4.5rem;
          text-align: center;
          cursor: pointer;
          font-size: 0.875rem;
          border-radius: 0.25rem;
        }
        @media (min-width: 600px) {
          .h-entry summary {
            position: absolute;
            right: 0;
            top: 2.5rem;
          }
        }
        .love-html {
          border: 1px solid var(--c-theme);
          color: var(--c-theme);
          font-family: ui-monospace, Menlo, Monaco, "Cascadia Mono",
            "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace",
            "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New",
            monospace;
          font-weight: 700;
          font-size: 1rem;
          padding: 0.25rem 0.5rem;
        }
        .love-html span {
          animation: 0.75s infinite steps(5, start) blink;
        }
        @keyframes blink {
          to {
            visibility: hidden;
          }
        }
      </style>
    `,
  }

  return = <server/Layout.ori.html>({ site, page }, _template())
}.return 
---

<main class="copy h-feed">
  <h1 class="p-name">${site.name}</h1>
  <p>
    You found my
    <a href="https://blog.jim-nielsen.com/2024/rss-in-html/">
      experimental HTML feed
    </a>
    (there are also other ways to
    <a href="/subscribe/">subscribe</a>
    ).
  </p>
  <p>
    <span class="love-html">
      I
      <span>â™¥</span>
      HTML
    </span>
  </p>

  <h2>Recent posts</h2>
  ${Tree.map(site.posts.slice(0, 10), (post) => `
  <div class="h-entry" id="${post.permalink}">
    <h3>
      <a href="${post.permalink}" class="u-url">${post.title}</a>
    </h3>
    <time class="dt-published" datetime="${post.date}">
      ${post.date.slice(0, 10)} (Mountain time)
    </time>
    <details>
      <summary>View</summary>
      <!-- prettier-ignore -->
      <article class="e-content">
${post.tags.includes("rssClub") ? <server/RssClub.js>() : ""}
${post.contents.toString().replaceAll("<img", "<img loading='lazy'")}
${<server/ReplyHtml.js>({ post, site })}
      </article>
    </details>
  </div>
  ` )}
</main>
