---
(site) => {
  page = {
    title: "External Links",
    path: "/about/external-links/",
    head: `<style>
      .archive-chart {
        display: flex;
        flex-direction: column;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: var(--s-2);
      }

      .archive-chart li {
        position: relative;
      }

      .archive-chart li div {
        display: flex;
        gap: var(--s-8);
        align-items: center;
        padding: var(--s-6) var(--s-6);
        position: relative;
        z-index: 2;
        text-decoration: none;
        font-size: 0.875rem;
      }
      .archive-chart li div span:last-child {
        color: var(--c-text-light);
        font-size: 0.77777rem;
      }

      .archive-chart-bar {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: var(--c-fg);
        pointer-events: none;
        z-index: 1;
      }
    </style>`
  }

  return = <server/Layouts.js>.Page({ site, page }, _template())
}.return
---

${<server/Header.ori.html>('Links')}

<main class="wrapper">
  ${<server/PageNav.ori>({ key: "Links", activeHref: page.path })}

  <p>
    I thought it would be interesting to
    <a href="/2020/indexing-my-blogs-links/">
      index all the external links on my blog
    </a>
    and keep it as a running list.
  </p>

  <p>
    This is available as raw data at
    <a href="/.well-known/links"><code>/.well-known/links</code></a>
    . You can also read my post about the
    <a href="/2022/well-known-links-resource/">
      the idea of public, raw link data
    </a>
    .
  </p>

  <ol class="archive-chart">
    ${Tree.map(Tree.filter(site.externalLinks, (item) => item.count >= 2),
    (item) => `
    <li>
      <div>
        <img
          src="https://www.google.com/s2/favicons?domain=${item.domain}&sz=32"
          width="16"
          height="16"
          alt="Favicon for ${item.domain}"
          loading="lazy"
        />
        <span class="domain">${item.domain}</span>
        <span class="count" style="margin-left: auto">${item.count}</span>
      </div>
      <span
        class="archive-chart-bar"
        style="width: ${(item.count / site.externalLinks[0].count) * 100}%"
      ></span>
    </li>
    ` )}
  </ol>
</main>
