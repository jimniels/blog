---
(site) => {
  postsByTag: site.posts
    -> (posts) => Tree.filter(posts, (post) => !post.tags.includes("rssClub"))
    -> (posts) => Tree.group(posts, (post) => post.tags)
    -> Tree.sort

  return = _template()
}.return
---

${server/DocumentHead.ori.html}

<title>Post tags for ${site.name}</title>
<style>
  .tags-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 0.88888rem;
  }
  .tags-list li {
    display: flex;
    align-items: center;
    gap: 2px;
  }
  .tags-list a {
  }
  .tags-list small {
    color: var(--c-text-light);
  }
</style>

${server/DocumentBody.ori.html}

<main class="wrapper">
  <h1>Tags</h1>
  <ul class="tags-list">
    ${Tree.map(postsByTag, (posts, tag) => `
    <li>
      <a href="#${tag}" class="tag">#${tag}</a>
      <small>(${posts.length})</small>
    </li>
    ` )}
  </ul>

  ${Tree.map(postsByTag, (posts, tag) => `
  <h2 id="${tag}" style="margin: 2rem 0 0.5rem">
    <a href="#${tag}" style="color: inherit">
      #${tag}
      <small
        style="font-weight: 300; font-size: 1rem; color: var(--c-text-light)"
      >
        (${posts.length})
      </small>
    </a>
  </h2>

  ${<server/PostsList.js>(Tree.plain(Tree.values(posts)))} `)}
</main>

${server/DocumentEnd.ori.html}
