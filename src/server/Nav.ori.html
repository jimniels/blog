---
(site, path) => {


postsByYear = Tree.group(site.posts, (post) => post.date.slice(0, 4)) -> Tree.reverse,
postsByTag = Tree.group(site.posts, (post) => post.tags)

return = _template()
}.return
---

<nav class="nav">
  <h3 class="nav-label">Jim Nielsenâ€™s Blog</h3>
  <ul>
    <li>
      <a
        href="/"
        class="nav-list-item"
        aria-current="${path === '/' ? 'page' : 'false'}"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-home.svg}
        </span>
        <span class="nav-list-item__label">Home</span>
      </a>
    </li>
    <li>
      <a
        href="/search/"
        class="nav-list-item"
        aria-current="${path === '/search/' ? 'page' : 'false'}"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-search.svg}
        </span>
        <span class="nav-list-item__label">Search</span>
      </a>
    </li>

    <li>
      <a
        href="/subscribe/"
        aria-current="${path === '/subscribe/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">${server/svgs/heroicon-rss.svg}</span>
        <span class="nav-list-item__label">Subscribe</span>
      </a>
    </li>
  </ul>

  <h3 class="nav-label">Posts</h3>
  <ul>
    <li>
      <a
        href="/posts/trending/"
        aria-current="${path === '/posts/trending/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-trending.svg}
        </span>
        <span class="nav-list-item__label">Trending</span>
      </a>
    </li>
    <li>
      <a
        href="/posts/hacker-news/"
        aria-current="${path === '/posts/hacker-news/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">${server/svgs/hacker-news.svg}</span>
        <span class="nav-list-item__label">HN Hits</span>
      </a>
    </li>

    <li>
      <a
        href="/archive/"
        aria-current="${path === '/archive/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-archive.svg}
        </span>
        <span class="nav-list-item__label">Archive</span>
      </a>
    </li>
    <li>
      <a
        href="/posts/personal-favorites/"
        aria-current="${path === '/posts/personal-favorites/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-star.svg}
        </span>
        <span class="nav-list-item__label">Personal Favs</span>
      </a>
    </li>
  </ul>

  <h3 class="nav-label">Meta</h3>
  <ul>
    <li>
      <a
        href="/about/external-links/"
        aria-current="${path === '/about/external-links/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-outlinks.svg}
        </span>
        <span class="nav-list-item__label">External Links</span>
      </a>
    </li>
    <li>
      <a
        href="/about/internal-links/"
        aria-current="${path === '/about/internal-links/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-inlinks.svg}
        </span>
        <span class="nav-list-item__label">Internal Links</span>
      </a>
    </li>
    <li>
      <a
        href="/about/"
        aria-current="${path === '/about/' ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__icon">
          ${server/svgs/heroicon-about.svg}
        </span>
        <span class="nav-list-item__label">About</span>
      </a>
    </li>
  </ul>

  <h3 class="nav-label">Posts by Year</h3>
  <ul>
    ${Tree.map(postsByYear, (posts, year) => `
    <li>
      <a
        href="/${year}/"
        aria-current="${path === `/${year}/` ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__label">${year}</span>
        <span class="nav-list-item__meta">${posts.length}</span>
      </a>
    </li>
    `)}
  </ul>
  <h3 class="nav-label">Posts by Tag</h3>
  <ul>
    ${Tree.map(postsByTag, (posts, tag) => `
    <li>
      <a
        href="/tags/${tag}/"
        aria-current="${path === `/tags/${tag}/` ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__label">#${tag}</span>
        <span class="nav-list-item__meta">${posts.length}</span>
      </a>
    </li>
    ` )}
  </ul>
</nav>
