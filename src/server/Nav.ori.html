---
(site, path) => {


postsByYear = Tree.group(site.posts, (post) => post.date.slice(0, 4)) -> Tree.reverse,
postsByTag = Tree.group(site.posts, (post) => post.tags)

return = _template()
}.return
---

<nav class="nav">
  <h3 class="nav-label">Appearance</h3>
  <form class="theme-picker">
    ${Tree.map(appearances, (theme) => `
    <input
      type="radio"
      name="appearance"
      value="${theme}"
      id="appearance-${theme}"
    />
    <label for="appearance-${theme}" class="nav-list-item">
      <span class="nav-list-item__icon">
        ${server/svgs[`heroicon-${theme}.svg`]}
      </span>
      <span class="nav-list-item__label">${theme}</span>
      <span class="nav-list-item__meta">${server/svgs/heroicon-check.svg}</span>
    </label>
    ` )}
  </form>
  <h3 class="nav-label">Posts by Year</h3>
  <ul>
    ${Tree.map(postsByYear, (posts, year) => `
    <li>
      <a
        href="/${year}/"
        aria-current="${path === `/${year}/` ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__label">${year}</span>
        <span class="nav-list-item__meta">${posts.length}</span>
      </a>
    </li>
    `)}
  </ul>
  <h3 class="nav-label">Posts by Tag</h3>
  <ul>
    ${Tree.map(postsByTag, (posts, tag) => `
    <li>
      <a
        href="/tags/${tag}/"
        aria-current="${path === `/tags/${tag}/` ? 'page' : 'false'}"
        class="nav-list-item"
      >
        <span class="nav-list-item__label">#${tag}</span>
        <span class="nav-list-item__meta">${posts.length}</span>
      </a>
    </li>
    ` )}
  </ul>
</nav>
